package main;

import java.util.Random;

public class GameSetup {
	
	private int bombs= 1;
	private int gridSize = 10;
	private int[][] hidden = new int[gridSize][gridSize];
	private int[][] visible = new int[gridSize][gridSize];
	public boolean gameOver = false;
	
	public boolean isGameOver() {
		return gameOver;
	}
	public void setGameOver(boolean gameOver) {
		this.gameOver = gameOver;
	}
	
	public void setupHidden() {
		setupBombs();
		for(int i = 0; i < this.gridSize; i++) {
			for(int j = 0; j< this.gridSize; j++) {
				if(hidden[i][j]!=-1) {
					countAdjBombs(j,i);
				}
			}
		}
		hidden[0][0]=-1;
		
	}
	private void setupBombs() {
		Random random = new Random();
		int loop = 0;
		while(loop!=bombs) {
			int row = random.nextInt(this.gridSize);
			int col = random.nextInt(this.gridSize);
			hidden[row][col] = -1;
		}
		
	}
	
	private int countAdjBombs(int row, int col) {
		int tempRow = 0;
		int tempCol = 0;
		int bombsCounted = 0;
		for(int i = -1; i <=1; i++) {
			for(int j = -1; j<=1; j++) {
				if(row == 0 || col == 0) {
					continue;
				}
				if(row==9 || col==9) {
					continue;
				}
				
				tempRow = row+i; 
				tempCol = col+j;
				
				if(hidden[tempRow][tempCol]==-1) {
					bombsCounted++;
				}
			}
		}
		return bombsCounted;
	}
	public void displayVisible() {
		System.out.print("\t ");
		for(int i =0; i < gridSize; i ++) {
			System.out.print(String.format("| %d ", i+1));
		}
		System.out.print("| \n");
		for(int i=0; i < gridSize; i++) {
			System.out.print(String.format("%d \t | ", i+1));
			for(int j=0; j<gridSize; j++) {
				if(visible[i][j]!=-1) {
					System.out.print(visible[i][j]);
				}
				else {
					System.out.println("You hit a bomb!");
				}
				System.out.print(" | ");
			}
			System.out.println();
		}
	}
	public void setVisibleFromGuess(int row, int col) {
		
		visible[row][col] = hidden[row][col];
		System.out.println(visible[row][col]);
		if(visible[row][col]==-1) {
			setGameOver(true);
		}
		
	}
}
